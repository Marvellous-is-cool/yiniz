<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <!-- site metas -->
    <title>Test Session</title>
    <!-- bootstrap css -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <!-- style css -->
    <link rel="stylesheet" href="/css/edutech/etest/css/style.css" />
    <!-- Responsive-->
    <style>
      .header-buttons button {
        font-size: 14px; /* Adjust font size for smaller screens */
        padding: 5px 10px; /* Adjust padding for smaller screens */
      }
    </style>
  </head>
  <body class="main-layout">
    <header>
      <!-- Timer display -->
      <div class="text-center mt-3" id="timer-container"></div>
      <!-- header inner -->
      <div class="header">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-md-3">
              <div class="logo" style="display: flex; flex-direction: column">
                <a href="#">
                  <img
                    class="logo1 w-25"
                    src="/images/edu/etest/images/lincssalogo.png"
                    alt="#"
                  />
                </a>
                <li>
                  <b class="text-warning">LINCSSA</b> |
                  <b class="text-light"> Online Test </b>
                </li>
              </div>
            </div>
            <div class="col-md-9 text-right">
              <div class="header-buttons">
                <button class="btn btn-dark mr-2 back-btn">Back</button>
                <button class="btn btn-success mr-2 next-btn">Next</button>
                <button class="btn btn-danger" disabled="true">Submit</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- end header inner -->
    <!-- end header -->
    <!-- banner -->
    <section class="banner_main"></section>
    <!-- end banner -->
    <!-- team -->
    <div class="team">
      <div class="container">
        <% for(let i = 0; i < questions.length; i += 5) { %>
        <!-- QUESTION CONTAINERS -->
        <div class="row d_flex p-3">
          <% for(let j = i; j < Math.min(i + 5, questions.length); j++) { %>
          <div
            class="col-md-6 offset-md-1 animate__animated question-container<%= j === i ? '' : ' d-none' %>"
          >
            <div class="titlepage">
              <h2>Question <b class="quesno"><%= j + 1 %></b></h2>
              <p><b><%= questions[j].question_text %></b></p>
              <h3 class="mb-5" style="border-bottom: 1px solid yellow">
                <span class="btn btn-primary p-2 m-1 optA"
                  >A. <b class="optionA"><%= questions[j].option_a %></b></span
                >
                <span class="btn btn-primary p-2 m-1 optB"
                  >B. <b class="optionB"><%= questions[j].option_b %></b></span
                >
                <span class="btn btn-primary p-2 m-1 optC"
                  >C. <b class="optionC"><%= questions[j].option_c %></b></span
                >
                <span class="btn btn-primary p-2 m-1 optD"
                  >D. <b class="optionD"><%= questions[j].option_d %></b></span
                >
                <span class="btn btn-primary p-2 m-1 optE"
                  >E. <b class="optionE"><%= questions[j].option_e %></b></span
                >
              </h3>
            </div>
          </div>
          <% } %>
        </div>
        <% } %>
        <div class="row p-3">
          <div class="col-md-12">
            <div class="header-buttons mt-3">
              <button class="btn btn-dark mr-2 back-btn">Back</button>
              <button class="btn btn-success mr-2 next-btn">Next</button>
              <button class="btn btn-danger" disabled="true">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- footer -->
    <footer>
      <div class="footer">
        <div class="container">
          <div class="row">
            <div
              class="col-xl-3 col-lg-3 col-md-6 col-sm-6"
              style="display: flex; flex-direction: column"
            >
              <img
                class="logo1 w-25"
                src="/images/edu/etest/images/lincssalogo.png"
                alt="#"
              />
              <ul class="about_us">
                <li>
                  <b class="text-warning">LINCSSA</b> |
                  <b class="text-light"> Online Test </b>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- end footer -->
    <!-- Javascript files-->
    <!-- <script src="/js/edutech/etest/js/jquery.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <!-- <script src="/js/edutech/etest/js/jquery-3.0.0.min.js"></script> -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const questionContainers = document.querySelectorAll(
          ".question-container"
        );

        const nextButtons = document.querySelectorAll(
          ".header-buttons .next-btn"
        );
        const backButtons = document.querySelectorAll(
          ".header-buttons .back-btn"
        );

        let currentQuestionIndex = 0;

        function showQuestions(startIndex) {
          for (let i = 0; i < questionContainers.length; i++) {
            if (i >= startIndex && i < startIndex + 5) {
              questionContainers[i].classList.remove("d-none");
            } else {
              questionContainers[i].classList.add("d-none");
            }
          }
        }

        showQuestions(currentQuestionIndex);

        nextButtons.forEach((nextButton) => {
          nextButton.addEventListener("click", function () {
            if (currentQuestionIndex < questionContainers.length - 5) {
              currentQuestionIndex += 5;
              showQuestions(currentQuestionIndex);
            }
          });
        });

        backButtons.forEach((backButton) => {
          backButton.addEventListener("click", function () {
            if (currentQuestionIndex >= 5) {
              currentQuestionIndex -= 5;
              showQuestions(currentQuestionIndex);
            }
          });
        });

        // Timer functionality
        const currentDateTime = new Date();
        const startDateTime = new Date(currentDateTime);
        startDateTime.setHours(startDateTime.getHours() + 1); // Start time 1 hour from now
        const endDateTime = new Date(startDateTime);
        endDateTime.setHours(endDateTime.getHours() + 5); // End time 5 hours after start time

        function startTimer(duration) {
          let timer = duration;
          const intervalId = setInterval(function () {
            if (timer <= 0) {
              clearInterval(intervalId);
              alert("Test ended");
            }
            timer--;
          }, 1000);
        }

        function calculateTimeRemaining() {
          const now = new Date();
          const difference = endDateTime - now;
          return Math.max(0, Math.floor(difference / 1000));
        }

        function initializeTimer() {
          const remainingTimeInSeconds = calculateTimeRemaining();
          startTimer(remainingTimeInSeconds);
        }

        initializeTimer();
      });
    </script>
  </body>
</html>
